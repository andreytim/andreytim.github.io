<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Kth number divisible only by 3, 5 or 7 &#8211; Soft Thoughts</title>
<meta name="description" content="This note is about another popular problem of finding Kth number such that the only prime factors are 3, 5 or 7. As usual there are a lot of solutions on the web and there is a great and quite detailed guide to this problem in "Cracking the Coding Interview" by G.Laakmann. But still there are some things to improve, in my opinion. A dynamic programming solution could be more efficient in practice than the one proposed in the book due to using of primitives and arrays despite the similarity in O(k) time and O(k) memory complexity.">
<meta name="keywords" content="java, algorithms, dynamic programming">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Kth number divisible only by 3, 5 or 7">
<meta property="og:description" content="This note is about another popular problem of finding Kth number such that the only prime factors are 3, 5 or 7. As usual there are a lot of solutions on the web and there is a great and quite detailed guide to this problem in "Cracking the Coding Interview" by G.Laakmann. But still there are some things to improve, in my opinion. A dynamic programming solution could be more efficient in practice than the one proposed in the book due to using of primitives and arrays despite the similarity in O(k) time and O(k) memory complexity.">
<meta property="og:url" content="http://andreytim.com/java/algorithms/kth-3-5-7-number/">
<meta property="og:site_name" content="Soft Thoughts">





<link rel="canonical" href="http://andreytim.com/java/algorithms/kth-3-5-7-number/">
<link href="http://andreytim.com/feed.xml" type="application/atom+xml" rel="alternate" title="Soft Thoughts Feed">
<link rel="author" href="https://google.com/+AndreyTimoshpolsky?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://andreytim.com/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://andreytim.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://andreytim.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://andreytim.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://andreytim.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://andreytim.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://andreytim.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://andreytim.com/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://andreytim.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://andreytim.com/images/avatar.jpg" alt="Andrey Timoshpolsky photo" class="author-photo">
					<h4>Andrey Timoshpolsky</h4>
					<p>Software Engineer</p>
				</li>
				<li><a href="http://andreytim.com/about/">Learn More</a></li>
				<li>
					<a href="mailto:andrey.timoshpolsky@gmail.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				
				
				<li>
					<a href="https://google.com/+AndreyTimoshpolsky"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/shpolsky"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/andreytim"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://andreytim.com/posts/">All Posts</a></li>
				<li><a href="http://andreytim.com/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://andreytim.com/java/algorithms/kth-3-5-7-number/" rel="bookmark" title="Kth number divisible only by 3, 5 or 7">Kth number divisible only by 3, 5 or 7</a></h1>
        
        <h2>November 17, 2014</h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~2 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <h3 id="intro">Intro</h3>

<p>This note is about another popular problem of finding Kth number such that the only prime factors are 3, 5 or 7. As usual there are a lot of solutions on the web and there is a great and quite detailed guide to this problem in “Cracking the Coding Interview” by G.Laakmann. But still there are some things to improve, in my opinion. A dynamic programming solution could be more efficient in practice than the one proposed in the book due to using of primitives and arrays despite the similarity in O(k) time and O(k) memory complexity.</p>

<h3 id="details">Details</h3>

<p>The idea is to generate all numbers in ascending order running sequentially through the powers of 3, 5 and 7. 
Here is an implementation in Java:  </p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">int</span> <span class="nf">kth357</span><span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">k</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">];</span>
    <span class="n">arr</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">p3</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">p5</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">p7</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">next</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">arr</span><span class="o">[</span><span class="n">p3</span><span class="o">]*</span><span class="mi">3</span><span class="o">,</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">arr</span><span class="o">[</span><span class="n">p5</span><span class="o">]*</span><span class="mi">5</span><span class="o">,</span> <span class="n">arr</span><span class="o">[</span><span class="n">p7</span><span class="o">]*</span><span class="mi">7</span><span class="o">));</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="n">arr</span><span class="o">[</span><span class="n">p3</span><span class="o">]*</span><span class="mi">3</span><span class="o">)</span> <span class="n">p3</span><span class="o">++;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="n">arr</span><span class="o">[</span><span class="n">p5</span><span class="o">]*</span><span class="mi">5</span><span class="o">)</span> <span class="n">p5</span><span class="o">++;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="n">arr</span><span class="o">[</span><span class="n">p7</span><span class="o">]*</span><span class="mi">7</span><span class="o">)</span> <span class="n">p7</span><span class="o">++;</span>
        <span class="n">arr</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">arr</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
<span class="o">}</span></code></pre></div>

<p>Here, p3, p5 and p7 are the indices of the next number which will be multiplied by 3, 5 or 7 respectively. And there could be a few questions that I’m gonna try to answer (in my own words :)):<br />
1. <em>How do we get rid of inevitable duplicates?</em><br />
Well, as we always pick the next smallest number we will pick duplicates (like 3x5 and 5x3) at the same single step and increment both pointers.<br />
2. <em>Why will we cover all numbers with such approach and won’t miss anything?</em><br />
Because during the calculation we actually try to multiply every number that we already processed to our three primes. In other words, having calculated every number before some i, eventually for each of them we try to increment by 1 the power of each of its’ three prime factors.<br />
You can find the full working code with the test cases on my <a href="https://github.com/andreytim/jafar/blob/master/problems/src/main/java/com/andreytim/jafar/problems/numeric/P16_MultiplesOf357.java">github</a>.  </p>

<p>Hope, it will be useful for somebody.</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://andreytim.com/tags/#java" title="Pages tagged java" class="tag">java</a><a href="http://andreytim.com/tags/#algorithms" title="Pages tagged algorithms" class="tag">algorithms</a><a href="http://andreytim.com/tags/#dynamic programming" title="Pages tagged dynamic programming" class="tag">dynamic programming</a></span>
        <span><a href="http://andreytim.com/java/algorithms/kth-3-5-7-number/" rel="bookmark" title="Kth number divisible only by 3, 5 or 7">Kth number divisible only by 3, 5 or 7</a> was published on <span class="entry-date date published updated"><time datetime="2014-11-17T00:00:00+03:00">November 17, 2014</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="http://andreytim.com/about/" title="About Andrey Timoshpolsky">Andrey Timoshpolsky</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://andreytim.com/java/algorithms/kth-3-5-7-number/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://andreytim.com/java/algorithms/kth-3-5-7-number/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=http://andreytim.com/java/algorithms/kth-3-5-7-number/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
          </ul>
        </div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://andreytim.com/java/algorithms/bs-in-a-rotated-sorted-array-with-duplicates/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://andreytim.com/java/algorithms/topcoder/number-of-subtrees-in-a-tree/" title="Number of sub-trees in a tree">Number of sub-trees in a tree</a></h3>
          <p>A couple of days ago I came across an interesting problem on TopCoder - CentaurCompanyDiv2 (SRM 570 - Division II, Level Three). What it asks is, basically, to find the number of sub-trees of a given tree. I am going to show how to do it in Java using dynamic programming approach with avoiding of ineffective recursion. Check it out if interested! <a href="http://andreytim.com/java/algorithms/topcoder/number-of-subtrees-in-a-tree/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://andreytim.com/java/tic-tac-toe-winner/" title="Tic-Tac-Toe winner">Tic-Tac-Toe winner</a></h4>
            <span>Published on November 23, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://andreytim.com/java/algorithms/bs-in-a-rotated-sorted-array-with-duplicates/" title="BS for rotated sorted array with duplicates">BS for rotated sorted array with duplicates</a></h4>
            <span>Published on November 15, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Andrey Timoshpolsky. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://andreytim.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://andreytim.com/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54767687-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'andreytim'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
